{"ast":null,"code":"var _jsxFileName = \"D:\\\\sattebaazi\\\\frontend\\\\src\\\\ActiveBets.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport PageLayout from \"./PageLayout\";\nimport CompanyShortlistModal from './CompanyShortlistModal';\nimport axios from 'axios';\nimport { motion } from \"framer-motion\";\n\n// You can keep helper constants like this if they are used in your design\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst domainLabels = {\n  quant: \"Quant\",\n  sde: \"SDE\",\n  product: \"Product\",\n  data: \"Data\",\n  core: \"Core\",\n  misc: \"Misc\"\n};\nexport default function ActiveBets({\n  user,\n  showUserGuideModal,\n  setShowUserGuideModal\n}) {\n  _s();\n  const [modalOpen, setModalOpen] = useState(false);\n  const [selectedCompany, setSelectedCompany] = useState(null);\n  const [search, setSearch] = useState(\"\");\n\n  // State for data fetched from the API\n  const [activeBetsData, setActiveBetsData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // useEffect to fetch data from the API when the component loads\n  useEffect(() => {\n    const fetchActiveBets = async () => {\n      try {\n        const res = await axios.get('http://localhost:5000/api/bets/active');\n        setActiveBetsData(res.data);\n      } catch (err) {\n        console.error(\"Failed to fetch active bets\", err);\n        setError(\"Could not load active bets.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchActiveBets();\n  }, []);\n\n  // useMemo to process the fetched data for display\n  const filteredCompanies = useMemo(() => {\n    const companiesMap = new Map();\n    activeBetsData.forEach(bet => {\n      const company = bet.companyEvent;\n      if (!company) return;\n      if (!companiesMap.has(company._id)) {\n        companiesMap.set(company._id, {\n          ...company,\n          id: company._id,\n          name: company.companyName,\n          role: company.jobProfile,\n          shortlist: []\n        });\n      }\n      if (bet.candidate) {\n        const companyOnMap = companiesMap.get(company._id);\n        // Ensure we don't add duplicate candidates to the shortlist\n        if (!companyOnMap.shortlist.find(c => c._id === bet.candidate._id)) {\n          companyOnMap.shortlist.push(bet.candidate);\n        }\n      }\n    });\n    let companies = Array.from(companiesMap.values());\n    if (!search.trim()) return companies;\n    const term = search.trim().toLowerCase();\n    return companies.filter(c => c.name.toLowerCase().includes(term) || c.role && c.role.toLowerCase().includes(term));\n  }, [search, activeBetsData]);\n\n  // Placeholder for modal submission - to be built later\n  function handleModalSubmit(betsToSubmit, totalBet) {\n    console.log(\"Submitting Bets:\", betsToSubmit);\n    setModalOpen(false);\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(PageLayout, {\n      user: user,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading Active Bets...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(PageLayout, {\n      user: user,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(PageLayout, {\n    user: user,\n    onUserGuide: () => setShowUserGuideModal(true),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full flex flex-col items-center mb-6 mt-0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 px-0\"\n      // ... your motion variants\n      ,\n      children: filteredCompanies.length === 0 ? /*#__PURE__*/_jsxDEV(motion.div, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this) : filteredCompanies.map(company =>\n      /*#__PURE__*/\n      // PASTE YOUR FULL <motion.div> FOR THE COMPANY CARD HERE\n      // Make sure to use the correct variable names like:\n      // key={company.id}\n      // {company.name}\n      // {company.role}\n      // {company.shortlist.length}\n      // company.shortlist.map(cand => <div key={cand._id}>{cand.name}</div>)\n      _jsxDEV(\"div\", {\n        children: [\"Company: \", company.name]\n      }, company.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CompanyShortlistModal, {\n      open: modalOpen,\n      onClose: () => setModalOpen(false),\n      company: selectedCompany,\n      candidates: (selectedCompany === null || selectedCompany === void 0 ? void 0 : selectedCompany.shortlist) || [],\n      bets: [] // Placeholder\n      ,\n      onSubmit: handleModalSubmit,\n      stakes: {} // Placeholder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n_s(ActiveBets, \"mQjs6tT4FBMn1ha2YL/kdGgZlfw=\");\n_c = ActiveBets;\nvar _c;\n$RefreshReg$(_c, \"ActiveBets\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","PageLayout","CompanyShortlistModal","axios","motion","jsxDEV","_jsxDEV","domainLabels","quant","sde","product","data","core","misc","ActiveBets","user","showUserGuideModal","setShowUserGuideModal","_s","modalOpen","setModalOpen","selectedCompany","setSelectedCompany","search","setSearch","activeBetsData","setActiveBetsData","loading","setLoading","error","setError","fetchActiveBets","res","get","err","console","filteredCompanies","companiesMap","Map","forEach","bet","company","companyEvent","has","_id","set","id","name","companyName","role","jobProfile","shortlist","candidate","companyOnMap","find","c","push","companies","Array","from","values","trim","term","toLowerCase","filter","includes","handleModalSubmit","betsToSubmit","totalBet","log","children","fileName","_jsxFileName","lineNumber","columnNumber","onUserGuide","className","div","length","map","open","onClose","candidates","bets","onSubmit","stakes","_c","$RefreshReg$"],"sources":["D:/sattebaazi/frontend/src/ActiveBets.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from \"react\";\nimport PageLayout from \"./PageLayout\";\nimport CompanyShortlistModal from './CompanyShortlistModal';\nimport axios from 'axios';\nimport { motion } from \"framer-motion\";\n\n// You can keep helper constants like this if they are used in your design\nconst domainLabels = {\n  quant: \"Quant\",\n  sde: \"SDE\",\n  product: \"Product\",\n  data: \"Data\",\n  core: \"Core\",\n  misc: \"Misc\"\n};\n\nexport default function ActiveBets({ user, showUserGuideModal, setShowUserGuideModal }) {\n  const [modalOpen, setModalOpen] = useState(false);\n  const [selectedCompany, setSelectedCompany] = useState(null);\n  const [search, setSearch] = useState(\"\");\n\n  // State for data fetched from the API\n  const [activeBetsData, setActiveBetsData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // useEffect to fetch data from the API when the component loads\n  useEffect(() => {\n    const fetchActiveBets = async () => {\n      try {\n        const res = await axios.get('http://localhost:5000/api/bets/active');\n        setActiveBetsData(res.data);\n      } catch (err) {\n        console.error(\"Failed to fetch active bets\", err);\n        setError(\"Could not load active bets.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchActiveBets();\n  }, []);\n\n  // useMemo to process the fetched data for display\n  const filteredCompanies = useMemo(() => {\n    const companiesMap = new Map();\n    activeBetsData.forEach(bet => {\n      const company = bet.companyEvent;\n      if (!company) return;\n\n      if (!companiesMap.has(company._id)) {\n        companiesMap.set(company._id, {\n          ...company,\n          id: company._id,\n          name: company.companyName,\n          role: company.jobProfile,\n          shortlist: []\n        });\n      }\n      if (bet.candidate) {\n        const companyOnMap = companiesMap.get(company._id);\n        // Ensure we don't add duplicate candidates to the shortlist\n        if (!companyOnMap.shortlist.find(c => c._id === bet.candidate._id)) {\n            companyOnMap.shortlist.push(bet.candidate);\n        }\n      }\n    });\n    let companies = Array.from(companiesMap.values());\n\n    if (!search.trim()) return companies;\n    const term = search.trim().toLowerCase();\n    return companies.filter(c => \n      c.name.toLowerCase().includes(term) ||\n      (c.role && c.role.toLowerCase().includes(term))\n    );\n  }, [search, activeBetsData]);\n  \n  // Placeholder for modal submission - to be built later\n  function handleModalSubmit(betsToSubmit, totalBet) {\n    console.log(\"Submitting Bets:\", betsToSubmit);\n    setModalOpen(false);\n  }\n\n  if (loading) {\n    return <PageLayout user={user}><div>Loading Active Bets...</div></PageLayout>;\n  }\n  if (error) {\n    return <PageLayout user={user}><div>{error}</div></PageLayout>;\n  }\n\n  return (\n    <PageLayout user={user} onUserGuide={() => setShowUserGuideModal(true)}>\n      {/* --- PASTE YOUR FULL JSX DESIGN HERE --- */}\n      {/* It starts with the Heading and Search Bar div */}\n      <div className=\"w-full flex flex-col items-center mb-6 mt-0\">\n        {/* Your <motion.h1> and <motion.input> for search */}\n      </div>\n\n      {/* And continues with the main grid */}\n      <motion.div\n        className=\"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 px-0\"\n        // ... your motion variants\n      >\n        {filteredCompanies.length === 0 ? (\n          <motion.div /* ... your 'No results found' JSX ... */ />\n        ) : (\n          filteredCompanies.map(company => (\n            // PASTE YOUR FULL <motion.div> FOR THE COMPANY CARD HERE\n            // Make sure to use the correct variable names like:\n            // key={company.id}\n            // {company.name}\n            // {company.role}\n            // {company.shortlist.length}\n            // company.shortlist.map(cand => <div key={cand._id}>{cand.name}</div>)\n            <div key={company.id}>Company: {company.name}</div>\n          ))\n        )}\n      </motion.div>\n      \n      <CompanyShortlistModal\n        open={modalOpen}\n        onClose={() => setModalOpen(false)}\n        company={selectedCompany}\n        candidates={selectedCompany?.shortlist || []}\n        bets={[]} // Placeholder\n        onSubmit={handleModalSubmit}\n        stakes={{}} // Placeholder\n      />\n    </PageLayout>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}